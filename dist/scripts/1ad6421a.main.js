function differentWidth(a){return function(){return console.log(5*a),5*a}}function getColor(){return"#"+Math.floor(16777215*Math.random()).toString(16)}function vectorize(a){var b=[];b.push({lat:0,lng:0});for(var c=1;c<a.length;c++)b.push({lat:a[c].lat()-a[c-1].lat(),lng:a[c].lng()-a[c-1].lng()});return b}function fiveSecLoad(){console.log(),pretendMapLoad=window.setTimeout(function(){$(".container-map").css("opacity",1),removeSignInForm()},5e3)}function removeSignInForm(){$("form").submit(function(a){$("#navi").css("opacity",0),window.setTimeout(function(){$("#navi").remove()},1e3),a.preventDefault()})}function initialize(){console.log(Modernizr),Modernizr.geolocation&&(console.log("geolocation available"),navigator.geolocation.getCurrentPosition(function(a){aboutMy.position=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),console.log(aboutMy.position);var b={center:aboutMy.position,zoom:7,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0};map=new google.maps.Map(document.getElementById("map-canvas"),b),map.setOptions({styles:noPoi}),console.log("position"+aboutMy.position),google.maps.event.addListenerOnce(map,"bounds_changed",function(){var a=new MeetupRequest;a.CORopenEvents(aboutMy.position)});var c=new google.maps.Marker({position:aboutMy.position,map:map,title:"Current Location",draggable:!0}),d='<div id="content"><h3 id="heading" class="heading">A Heading</h3><div id="body-content"> This is something interesting</div></div>;',e=new google.maps.InfoWindow({content:d});c.addListener("click",function(){e.open(map,c)})},function(){console.log("err")}))}function autocompleteCallback(a,b){return autocompletePredictions="",b!=google.maps.places.PlacesServiceStatus.OK?void alert(b):(console.log(a),a.forEach(function(a){autocompletePredictions+="<li>"+a.description+"</li>"}),void $(".prediction-list").html(autocompletePredictions))}function setAllMap(a){aboutMy.markers.forEach(function(b){b.setMap(a)})}function clearMarkers(){setAllMap(null)}function deleteMarkers(){clearMarkers(),aboutMy.markers=[]}var pageHTML=['<div class="container" id="kitty-klicker">','  <div class="row">','      <h1 id="title" class="title col-sm-12 center">Kitty Klicker</h1>',"  </div>",'  <div class="row">','      <div id="kitty-kontainer" class="col-sm-12">','          <h2>cat 1 Clicks <span id="kitty-klicks">0</span></h2>',"      </div>","  </div>",'  <div class="row">','      <div id="kitty-img" class="col-sm-10">','          <img src="img/cat1.jpg">',"      </div>",'      <div class="col-sm-2">','          <ul id="kitty-list" class="list-unstyled">',"          </ul>","      </div>","  </div>",'  <div class="row">','      <div class="col-sm-2">','          <button id="admin" class="btn btn-default btn-block" type="button">Admin</button>',"      </div>",'      <div id="form" class="col-sm-4">',"      </div>",'      <div class="col-sm-6"></div>',"  </div>","</div>"].join("\n"),HTML=['<div class="main-title-overlay">','  <div class="container-fluid" id="navi">','    <div class="row main-title-row">','        <h1 id="main-title" class="main-title col-sm-12">MeeTruck</h1>',"    </div>",'    <div class="row">','        <div class="col-md-12">','           <div class="main-logo-container">','             <img id="main-logo" class="img-responsive center-block img-rounded" src="http://dummyimage.com/200/000/fff" alt="MeeTruck Logo">',"           </div>","        </div>","    </div>","  </div>",'  <div class="container-map">','    <div id="map-canvas"></div>',"  </div>","</div>"].join("\n"),SearchHTML=function(a){return[].join("\n")},loginForm=['<form class="form-horizontal">','  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <input type="email" class="form-control" id="inputEmail3" placeholder="Email">',"    </div>","  </div>",'  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <input type="password" class="form-control" id="inputPassword3" placeholder="Password">',"    </div>","  </div>",'  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <div class="checkbox">',"        <label>",'          <input type="checkbox"> Remember me',"        </label>","      </div>","    </div>","  </div>",'  <div class="form-group">','    <div class="col-sm-3 col-sm-offset-3">','      <button type="submit" class="btn btn-default" id="sign-in-btn">Sign in</button>','      <button class="btn btn-default" id="sign-up-btn">Sign up</button>',"    </div>","  </div>","</form>"].join("\n"),signupForm=['<form class="form-horizontal">','  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <input type="email" class="form-control" id="inputEmail" placeholder="Email">',"    </div>","  </div>",'  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <input type="text" class="form-control" id="handle" placeholder="Handle">',"    </div>","  </div>",'  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <input type="password" class="form-control" id="createPassword" placeholder="Password">',"    </div>","  </div>",'  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <input type="password" class="form-control" id="verifyPassword" placeholder="Verify Password">',"    </div>","  </div>",'  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <div class="checkbox">',"        <label>",'          <input type="checkbox"> Remember me',"        </label>","      </div>","    </div>","  </div>",'  <div class="form-group">','    <div class="col-sm-6 col-sm-offset-3">','      <button type="submit" class="btn btn-default" id="sign-in-btn">Sign up</button>',"    </div>","  </div>","</form>"].join("\n"),testingHTML=['<div class="top-input hidden-offscreen-left">','  <div class="paleo-search">','    <form data-bind="submit: neighborhoodSearch">','      <input class="search-bar" id="search-bar" type="text" ></input>','      <ul class="prediction-list">',"      </ul>","    </form>","  </div>",'  <div class="menu-btn">','    <button id="open-menu" class="btn btn-default paleo-btn" type="submit">','      <span class="glyphicon glyphicon-search"></span>',"    </button>","  </div>","</div>",'<div class="left hidden-offscreen-left">','  <h2 data-bind="text: query">Points of Interest</h2>',"  <div>",'    <ul class="paleo-list" data-bind="foreach: pois">','      <li data-bind="text: name"></li>',"    </ul>","  </div>",'  <div class="list-btn">','    <button id="open-list" class="btn btn-default paleo-btn" type="submit">','      <span class="glyphicon glyphicon-list"></span>',"    </button>","  </div>","</div>",'<div class="container-map">','  <div id="map-canvas"></div>',"</div>",'<footer class="hidden-offscreen-left">','  <a href="http://glyphicons.com/">glyphicons</a>',"</footer>"].join("/n"),addressHTML=["<address>","  <strong>Twitter, Inc.</strong><br>","  1355 Market Street, Suite 900<br>","  San Francisco, CA 94103<br>",'  <abbr title="Phone">P:</abbr> (123) 456-7890',"</address>"].join("\n");$(function(){landingPageView={init:function(){console.log("landingPageView init"),this.logo="http://dummyimage.com/200/000/fff",this.appName="MeeTruck"},render:function(){console.log("landingPageView render")}},foodTruckMoreDetailView={init:function(){console.log("foodTruckMoreDetailView init")},render:function(){console.log("foodTruckMoreDetailView render")}},meetupMoreDetailView={init:function(){console.log("meetupMoreDetailView init")},render:function(){console.log("meetupMoreDetailView render")}},mainView={init:function(){},render:function(){}}});var tm=function(){this.seconds=0,this.convertToTime=function(a){var b=Math.floor(a/3600),c=Math.floor(60*(a/3600-b));return b=10>b?"0"+b:b,c=10>c?"0"+c:c,b+":"+c},this.verifySeconds=function(a){var b=-1;return a>=86400&&(console.log("seconds to high "+a),b=void 0),0>a&&(console.log("seconds too low "+a),b=void 0),void 0!=b&&(b=+a),b}};tm.prototype.getTime=function(){return this.convertToTime(this.seconds)},tm.prototype.initSecs=function(a){this.seconds=this.verifySeconds(a)},tm.prototype.getSecs=function(){return this.seconds};var User=function(){this.email="",this.handle="",this.password="",this.rememberMe=!1,this.now=new Date(2015,12,7,13,30,0),this.previousSearches=[],this.previousLocations=[],this.previousMeetupsSearches=[],this.previousFoodtruckSearches=[],this.previouslySelectedMeetups=[],this.previouslySelectedFoodtrucks=[],this.position={}};User.prototype.init=function(){this.email="garrettdavisbryan@gmail.com",this.handle="G-Money",this.password="cool",this.rememberMe=!1},User.prototype.continuingSession=function(){},User.prototype.staleSessionData=function(){var a=!0;return console.log(this.now.getTime()+36e5),console.log(aboutMy.now.getTime()),this.now.getTime()+36e5>aboutMy.now.getTime()&&(console.log("not stale"),a=!1),a},User.prototype.signIn=function(){},User.prototype.signUp=function(){},User.prototype.recentSearches=function(){},User.prototype.recentLocations=function(){},User.prototype.recentMeetups=function(){},User.prototype.sessionFoodTrucks=function(){},User.prototype.sessionMeetups=function(){},User.prototype.sessionWeather=function(){},User.prototype.saveSession=function(){localStorage.setItem("sessionData",JSON.stringify(this))},User.prototype.restoreSession=function(){var a=JSON.parse(localStorage.getItem("sessionData"));for(var b in a)this.hasOwnProperty(b)?this[b]=a[b]:console.log("doesnot have own property "+b);this.now=this.now instanceof Date?this.now:new Date(this.now),console.log(this),console.log(this.staleSessionData())},User.prototype.addSessionData=function(a,b){switch(a){case"food truck":break;case"meetup":break;case"weather":}};var MeetupRequest=function(){this.data={}};MeetupRequest.prototype.CORopenEvents=function(a){var b=setTimeout(function(){console.log("Failed to get Meetups.")},8e3);$.ajax({url:"https://api.meetup.com/2/open_events?and_text=False&offset=0&format=json&lon="+a.lng()+"&limited_events=False&photo-host=public&page=20&time=%2C1d&radius=25.0&lat="+a.lat()+"&desc=False&status=upcoming&sig_id=130469302&sig=6ebd2b264bedf38cb1e1af50ef292c0e2eeda64d",dataType:"jsonp",success:function(a){console.log(a),a.results.forEach(function(a){var b=new Meetup;b.init(a),aboutMy.meetups.push(b),console.log(Date(b.time)),b.render()}),clearTimeout(b),aboutMy.meetups.sort(function(a,b){return parseFloat(b.yes_rsvp_count)-parseFloat(a.yes_rsvp_count)}),aboutMy.determineMeetupMapBounds()}})};var Meetup=function(){};Meetup.prototype.init=function(a){for(var b in a)this[b]=a[b];console.log(this)},Meetup.prototype.render=function(){if(this.venue){this.marker=new google.maps.Marker({position:new google.maps.LatLng(this.venue.lat,this.venue.lon),map:map,title:this.group.name});var a='<div id="content"><h3 id="heading" class="heading">A Heading</h3><div id="body-content"> '+this.group.name+"</div></div>;",b=new google.maps.InfoWindow({content:a});this.marker.addListener("click",function(){b.open(map,this.marker)})}};var FoodTruck=function(){this.traveling=!1,this.active=!1,this.position={},this.name="",this.description="",this.img="",this.tImg="dist/images/e46e2953.resize_Food_Truck.png",this.schedule=[],this.comments=[],this.currentEvent=0,this.responses=[],this.mapPath=[]};FoodTruck.prototype.initNoSchedule=function(a){this.name=a.name,this.description=a.description,this.img=a.img},FoodTruck.prototype.randomizeStopPoint=function(a,b){var c=79200,d=b.getBounds(),e=d.getNorthEast().lat()-d.getSouthWest().lat(),f=d.getNorthEast().lng()-d.getSouthWest().lng(),g=Math.abs(e)<=Math.abs(f)?e:f,h=Math.abs(e-f)/2,i=this.schedule.length>0?this.schedule[this.schedule.length-1].endtime.getSecs()+1800:0;if(c>i){var j=i+Math.random()*(c-i),k=new tm;k.initSecs(j);var l=new tm;l.initSecs(j+3600),this.schedule.push({lat:d.getSouthWest().lat()+g*Math.random()+h,lng:d.getSouthWest().lng()+g*Math.random(),starttime:k,endtime:l})}},FoodTruck.prototype.create3RandomStopPoints=function(a,b){for(var c=0;3>c;c++)this.randomizeStopPoint(a,b)},FoodTruck.prototype.specificStopPoint=function(a,b,c){var d=79200,e=b.getBounds(),f=e.getNorthEast().lat()-e.getSouthWest().lat(),g=e.getNorthEast().lng()-e.getSouthWest().lng(),h=Math.abs(f)<=Math.abs(g)?f:g,i=Math.abs(f-g)/2,j=this.schedule.length>0?this.schedule[this.schedule.length-1].endtime.getSecs()+3600:28800;if(d>j){var k=j,l=new tm;l.initSecs(k);var m=new tm;m.initSecs(k+7200),this.schedule.push({lat:e.getSouthWest().lat()+h*Math.random()+i,lng:e.getSouthWest().lng()+h*Math.random(),starttime:l,endtime:m})}},FoodTruck.prototype.create3SpecificStopPoints=function(a,b){for(var c=0;3>c;c++)this.specificStopPoint(a,b,aboutMy.now)},FoodTruck.prototype.getDirections=function(){this.directionsService=new google.maps.DirectionsService},FoodTruck.prototype.calculateAndDisplayRoute=function(a,b){var c=this.schedule.length-1;if(this.position.lat=this.schedule[0].lat,this.position.lng=this.schedule[0].lng,this.schedule.length>1)for(var d=this,e=1,f=1;f<this.schedule.length;f++)!function(b){a.route({origin:new google.maps.LatLng(d.schedule[b-1].lat,d.schedule[b-1].lng),destination:new google.maps.LatLng(d.schedule[b].lat,d.schedule[b].lng),travelMode:google.maps.TravelMode.DRIVING},function(a,f){if(f===google.maps.DirectionsStatus.OK){e++,d.setResponses(b-1,a);var g=new google.maps.Polyline({path:a.routes[0].overview_path,geodesic:!0,strokeColor:getColor(),strokeOpacity:1,strokeWeight:5*(d.schedule.length-b)});g.setMap(map)}else window.alert("Directions request failed due to "+f);--c,0>=c&&d.determinePosition(aboutMy.now)})}(f)},FoodTruck.prototype.setResponses=function(a,b){this.responses[a]=b},FoodTruck.prototype.determinePosition=function(a){var b=3600*a.getHours()+60*a.getMinutes();if(this.pinPoint(b),this.traveling&&this.currentEvent>0&&this.currentEvent<this.schedule.length){var c=this.currentEvent-1,d=this.schedule[this.currentEvent-1].endtime.seconds,e=this.schedule[this.currentEvent].starttime.seconds,f=e-d,g=b-d,h=this.responses[c].routes[0].overview_path.length,i=Math.floor(g/f*h);this.position.lat=this.responses[c].routes[0].overview_path[i].lat(),this.position.lng=this.responses[c].routes[0].overview_path[i].lng()}else this.currentEvent<this.schedule.length&&(this.position.lat=this.schedule[this.currentEvent].lat,this.position.lng=this.schedule[this.currentEvent].lng);this.render()},FoodTruck.prototype.pinPoint=function(a){var b=this;this.traveling=!0;for(var c=0;c<b.schedule.length;c++)a<b.schedule[c].starttime.getSecs()?(b.currentEvent=c,c=b.schedule.length):a>b.schedule[c].starttime.getSecs()&&a<b.schedule[c].endtime.getSecs()?(b.currentEvent=c,b.traveling=!1,c=b.schedule.length):b.currentEvent=c+1},FoodTruck.prototype.getSchedule=function(){return this.schedule},FoodTruck.prototype.addToSchedule=function(a){this.schedule.push(a)},FoodTruck.prototype.removeFromSchedule=function(a){this.schedule.splice(a,1)},FoodTruck.prototype.updateSchedule=function(a,b){this.schedule.splice(a,1,b)},FoodTruck.prototype.clearSchedule=function(){this.scedule=[]},FoodTruck.prototype.render=function(){console.log(this),console.log(this.currentEvent);var a=this.img;if(this.traveling)var a=this.tImg;this.marker=new google.maps.Marker({position:new google.maps.LatLng(this.position.lat,this.position.lng),map:map,title:this.name,icon:a,draggable:!0})},FoodTruck.prototype.getGeoCodeer=function(){};var WeatherUnderground=function(){this.overlay={},this.mapBounds={},this.divWidth=0,this.divHeight=0};WeatherUnderground.prototype.setDimensions=function(a){this.mapBounds={north:a.getBounds().getNorthEast().lat(),south:a.getBounds().getSouthWest().lat(),east:a.getBounds().getNorthEast().lng(),west:a.getBounds().getSouthWest().lng()},this.divWidth=document.getElementById("map-canvas").clientWidth,this.divHeight=document.getElementById("map-canvas").clientHeight},WeatherUnderground.prototype.render=function(){this.overlay=new google.maps.GroundOverlay("http://api.wunderground.com/api/ec12cd13256c67c5/animatedradar/image.gif?maxlat="+this.mapBounds.north+"&maxlon="+this.mapBounds.east+"&minlat="+this.mapBounds.south+"&minlon="+this.mapBounds.west+"&width="+this.divWidth+"&height="+this.divHeight+"&rainsnow=1&num=5&delay=50&timelabel=1&timelabel.x=525&timelabel.y=41&smooth=1",this.mapBounds),this.overlay.setMap(map)};var program={name:"Meet Truck",description:"Meetups and Food Trucks",extendedDescription:"Coordinate your love of socializing with your love for food trucks",icon:""},aboutMy={now:new Date(2015,12,7,13,30,0),position:{},searches:[],markers:[],weather:{},foodTrucks:[],meetups:[],meetupMapBounds:{},mapBounds:{},determineMeetupMapBounds:function(){var a=this,b=new google.maps.LatLngBounds;console.log(b.toString()),this.meetups.forEach(function(b){b.venue&&(a.meetupMapBounds.max||(a.meetupMapBounds.max={lat:b.venue.lat,lng:b.venue.lon},a.meetupMapBounds.min={lat:b.venue.lat,lng:b.venue.lon}),a.meetupMapBounds.max.lat=a.meetupMapBounds.max.lat>b.venue.lat?a.meetupMapBounds.max.lat:b.venue.lat,a.meetupMapBounds.max.lng=a.meetupMapBounds.max.lng>b.venue.lon?a.meetupMapBounds.max.lng:b.venue.lon,a.meetupMapBounds.min.lat=a.meetupMapBounds.min.lat<b.venue.lat?a.meetupMapBounds.min.lat:b.venue.lat,a.meetupMapBounds.min.lng=a.meetupMapBounds.min.lng<b.venue.lon?a.meetupMapBounds.min.lng:b.venue.lon)}),console.log(a.meetupMapBounds),a.mapBounds={north:a.meetupMapBounds.max.lat,south:a.meetupMapBounds.min.lat,east:a.meetupMapBounds.max.lng,west:a.meetupMapBounds.min.lng},map.fitBounds(a.mapBounds);var c=new WeatherUnderground;c.setDimensions(map),aboutMy.weather=c,aboutMy.foodTrucks=[],foodTrucks.forEach(function(a){var b=new FoodTruck;b.initNoSchedule(a),b.create3RandomStopPoints(aboutMy.position,map),b.getDirections(),b.calculateAndDisplayRoute(b.directionsService,b.directionsDisplay),aboutMy.foodTrucks.push(b)})}},foodTrucks1=[{name:"Mammoth Meats",description:"Grass fed cows cooked up caveman style.",img:"dist/images/b8b4731b.resize_Woolly_Mammoth.png",locTime:[]}],foodTrucks=[{name:"Mammoth Meats",description:"Grass fed cows cooked up caveman style.",img:"dist/images/b8b4731b.resize_Woolly_Mammoth.png",locTime:[]},{name:"The Big Cuban",description:"Authentic cuban sandwiches now that the embargo is lifted.!",img:"dist/images/f6389950.resize_SandwichSU.png",locTime:[]},{name:"The Icee Snowman",description:"Snocones! Try the high fructose corn syrup flavor!",img:"dist/images/189b1c56.resize_Snowman_SU.png",locTime:[]},{name:"Tail of the Whale",description:"Sushi from a food truck - awesome!",img:"dist/images/2380b675.resize_Blue_Whale.png",locTime:[]},{name:"Cicada Poppers",description:"Awesome crunch",img:"dist/images/ea860781.resize_Cicada.png",locTime:[]}],foodTrucks10=[{name:"Mammoth Meats",description:"Grass fed cows cooked up caveman style.",img:"dist/images/b8b4731b.resize_Woolly_Mammoth.png",locTime:[]},{name:"The Big Cuban",description:"Authentic cuban sandwiches now that the embargo is lifted.!",img:"dist/images/f6389950.resize_SandwichSU.png",locTime:[]},{name:"The Icee Snowman",description:"Snocones! Try the high fructose corn syrup flavor!",img:"dist/images/189b1c56.resize_Snowman_SU.png",locTime:[]},{name:"Tail of the Whale",description:"Sushi from a food truck - awesome!",img:"dist/images/2380b675.resize_Blue_Whale.png",locTime:[]},{name:"Cicada Poppers",description:"Awesome crunch",img:"dist/images/ea860781.resize_Cicada.png",locTime:[]},{name:"The Sailor's Cup",description:"Premium Coffee from around the world",img:"dist/images/968f27db.resize_Coffee.png",locTime:[]},{name:"The Hole Enchilada",description:"Fusion Gourmet Donuts",img:"dist/images/b546e8ed.resize_Doughnut.png",locTime:[]},{name:"Boomerang Hut",description:"Kangaroo Steaks!",img:"dist/images/2cdc202e.resize_Kangaroo.png",locTime:[]},{name:"Overdone",description:"Outrageously ostentatious cupcakes",img:"dist/images/7d5dfd70.resize_Cupcake.png",locTime:[]},{name:"The Potato Pup",description:"Hotdogs topped with crunchy potato chips",img:"dist/images/3f076c52.resize_Hot_Dog.png",locTime:[]}];$(document).ready(function(){console.log("doocument.ready"),$("body").prepend(HTML),$(".main-title-overlay").append(SearchHTML(1)),$("#navi").append(loginForm),initialize(),fiveSecLoad();var a=new User;a.init(),console.log(a),console.log(a)}),$(function(){});var map,autocomplete,predictions,predictionList,autocompletePredictions=[],noPoi=[{featureType:"poi",stylers:[{visibility:"off"}]}],POI=function(a){this.name=ko.observable(a.name)},prediction=function(a){this.details=ko.observable(a)},ViewModel=function(){var a=this;this.query=ko.observable(""),this.pois=ko.observableArray([]),this.predictions=ko.observableArray([]),$(".search-bar").keyup(function(){autocomplete.getPlacePredictions({input:a.query(),location:aboutMy.position,radius:"500"},autocompleteCallback),console.log(a.query())}),a.neighborhoodSearch=function(){deleteMarkers(),a.pois([]);var b={location:aboutMy.position,radius:"500",keyword:a.query()};console.log(b.keyword);var c=new google.maps.places.PlacesService(map);c.nearbySearch(b,a.searchCallback)},a.createPlaceMarker=function(a){console.log(aboutMy.markers),aboutMy.markers.push(new google.maps.Marker({position:a.geometry.location,map:map,title:a.name}))},a.searchCallback=function(b,c){if(aboutMy.markers=[],c==google.maps.places.PlacesServiceStatus.OK)for(var d=0;d<b.length;d++){b[d];a.createPlaceMarker(b[d])}b.forEach(function(b){a.pois.push(new POI(b))}),a.pois.sort()}};ko.applyBindings(new ViewModel);